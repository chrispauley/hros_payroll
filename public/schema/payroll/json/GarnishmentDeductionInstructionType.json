{
    "$schema": "http://schema.hropenstandards.org/4_0/common/json/meta/hros.json",
    "version": "4.2.1",
    "title": "GarnishmentDeductionInstructionType",
    "description": "Instructions for benefits and other deductions.",
    "allOf": [
        { "$ref": "../../common/json/base/EffectiveTimePeriod.json#" }
    ],
    "type": "object",
    "definitions": {
        "PaymentMethodType": {
            "NOTE": "This should be in Common/json/pay",
            "title": "PaymentMethodType",
            "type": "object",
            "description": "The manner is which a payment is made. e.g. Direct Deposit, Check, etc.",
            "properties": {
                "code": { "$ref": "../../common/json/base/CodeType.json#" },
                "payrollDepositAccount": { "$ref": "DirectDepositAccountType.json#" }
            }
        },

        "JurisdictionType": {
            "title": "JurisdictionType",
            "description": "This type should be in common...",
            "type": "object",
            "properties": {
                "countryCode": { "$ref": "../../common/json/codelist/CountryCodeList.json#" },
                "countrySubDivisions": {
                    "description": "Qualifies the further divisions of the Country. These may be Districts, Regions, States, Provinces etc.",
                    "type": "array",
                    "items": { "$ref": "../../common/json/communication/AddressComponentType.json#" }
                },
                "city": { "type": "string" }
            }
        },

        "LeinType": {
            "description": "This is a reference to the lien specifics associated to a given garnishment. Not all garnishments are associated to liens.",
            "type": "object",
            "properties": {
                "id": { "$ref": "../../common/json/base/IdentifierType.json#" },
                "typeCode": { "$ref": "../../common/json/base/CodeType.json#" },
                "subTypeCode": { "$ref": "../../common/json/base/CodeType.json#" },
                "statusCode": { "$ref": "../../common/json/base/CodeType.json#" },
                "issuanceDate": { "$ref": "../../common/json/base/DateType.json#" },
                "registrationDate": { "$ref": "../../common/json/base/DateType.json#" },
                "sequence": { "type": "number" },
                "supportOrder": { "$ref": "#/definitions/SupportOrderType" },
                "guaranteedMinimumNetPayAmount": { "$ref": "../../common/json/base/AmountType.json#" },
                "numberOfDependents": { "$ref": "../../common/json/base/QuantityType.json#" },
                "numberOfAllowances": { "$ref": "../../common/json/base/QuantityType.json#" },
                "excludedEarningCodes": {
                    "type": "array",
                    "items": { "$ref": "../../common/json/base/CodeType.json#" }
                },
                "excludedDeductionCodes": {
                    "type": "array",
                    "items": { "$ref": "../../common/json/base/CodeType.json#" }
                }
            }
        },

        "SupportOrderType": {
            "description": "This further defines a specific type of Lien known as a support order.",
            "type": "object",
            "properties": {
                "id": { "$ref": "../../common/json/base/IdentifierType.json#" },
                "supportOrderJurisdiction": { "$ref": "#/definitions/JurisdictionType" },
                "lienServiceChargeAmount": { "$ref": "../../common/json/base/AmountType.json#" },
                "multipleFamilySupportIndicator": { "$ref": "../../common/json/base/IndicatorType.json#" },
                "dependentMedicalInsuranceIndicator": { "$ref": "../../common/json/base/IndicatorType.json#" },
                "arrearsIndicator": { "$ref": "../../common/json/base/IndicatorType.json#" },
                "LienFIPSCode": { "$ref": "../../common/json/base/CodeType.json#" }
            }

        },

        "LienFundsDisbursementType": {
            "description": "This tells the payroll system how the funds associated to a lien garnishment should be paid.",
            "type": "object",
            "properties": {
                "obligee": {
                    "description": "This defines the ultimate receiver of the lien funds.",
                    "type": "object",
                    "properties": {
                        "obligeePerson": {
                            "personId": { "$ref": "../../common/json/base/IdentifierType.json#" },
                            "personName": { "$ref": "../../common/json/person/PersonNameType.json#" },
                            "communication": { "$ref": "../../common/json/communication/CommunicationType.json#" }
                        },
                        "obligeeOrganization": {
                            "NOTE": "Also extends OrganizationIdentifiersType.",
                            "contactPersonName": { "$ref": "../../common/json/person/PersonNameType.json#" },
                            "communication": { "$ref": "../../common/json/communication/CommunicationType.json#" }
                        }
                    }
                },
                "payee": {
                    "PayeePerson": {
                        "personId": { "$ref": "../../common/json/base/IdentifierType.json#" },
                        "personName": { "$ref": "../../common/json/person/PersonNameType.json#" },
                        "communication": { "$ref": "../../common/json/communication/CommunicationType.json#" }
                    },
                    "PayeeOrganization": {
                        "NOTE": "Also extends OrganizationIdentifiersType.",
                        "contactPersonName": { "$ref": "../../common/json/person/PersonNameType.json#" },
                        "communication": { "$ref": "../../common/json/communication/CommunicationType.json#" }
                    }
                },
                "payeeIsRecipientIndicator": { "$ref": "../../common/json/base/IndicatorType.json#" },
                "PaymentMethod": {},
                "Fees": {
                    "type": "array",
                    "items": {

                    }
                },
                "messages": { "$ref": "../../common/json/base/StringTypeArray.json#" }
            }
        }
    },

    "properties": {
        "deductionCycleCode": {
            "description": "The frequency at which a deduction is taken.",
            "$ref": "../../common/json/codelist/PayCycleIntervalCodeList.json#"
        },
        "totalTransactions": { "type": "number" },
        "processingSequence": { "type": "number" },
        "garnishmentDeduction": { "$ref": "GarnishmentDeductionType.json#" },
        "lien": { "$ref": "#/definitions/LeinType" },
        "lienFundsDisbursement": { "$ref": "#/definitions/LienFundsDisbursementType" }
    }
}
